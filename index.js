
var map = [
    '..................................###############...........',
    '..................................#.............#...........',
    '..................................#..########...#...........',
    '......######...........############..#......#...#...........',
    '......#....#...........#.............#......#####...########',
    '......#....#...........#.####..#######.........######......#',
    '......#....#############....#..#################...........#',
    '......#..................####....................###########',
    '......############.#######..######################..........',
    '.................#.#........................................',
    '.................#.#........................................',
    '.................#.#........................................',
    '.................#.#........................................',
    '.................#.#############.........############.......',
    '.................#.............#.........#..........#.......',
    '.................#.............#.........#.########.#.......',
    '.................#.............#.........#.#......#.#.......',
    '................##.............#.........#.#......#.#.......',
    '................#...#########..###########.#......#.#.......',
    '................#...#.......#..............#......#.#.......',
    '................#...#.......################......#.#.......',
    '................#...#.............................#.#.......',
    '#################...#....##########...............#.#.......',
    '#...................#....#........#...............#.#.......',
    '#..##################....#........#....############.######..',
    '#..#.....#...............#........#....#.................#..',
    '#..#.....#################........#....#.................#..',
    '#.................................#....###################..',
    '####################..............#.........................',
    '...................################.........................'

]

window.onload = function() {

    var stage = document.getElementById('cnvs'),
        ctx = stage.getContext('2d'), 
        x = 8*20,
        y = 5*20,
        wid = 20, 
        hei = 30;

    stage.width  = stage.offsetWidth;
    stage.height = stage.offsetHeight;

    function drawPlayer(x, y, wid, hei) {
        var img = new Image();
        img.src = 'rsz_knight.png';
        img.onload = function() {
            var pattern = ctx.createPattern(img, '');
            //ctx.fillRect(x, y, wid, hei);
            ctx.drawImage(img, x, y-10);
        };
        ctx.beginPath();
        ctx.rect(x, y, 20, 20);
        ctx.strokeStyle = "rgba(0, 0, 255, 0.5)";
        ctx.stroke();
        ctx.closePath();
    }

    function drawMap() {
        var current_row = 0
        var current_clm = 0
        for(current_row=0; current_row<30; current_row++) {
            for(current_clm=0; current_clm<61; current_clm++) {
                if (map[current_row][current_clm] == '#') {
                    ctx.beginPath();
                    ctx.rect(current_clm*20, current_row*20, 20, 20);
                    ctx.strokeStyle = "rgba(0, 0, 0)";
                    ctx.stroke();
                    ctx.closePath();
                }
            }
        }
    }

    drawPlayer(x, y, wid, hei)

    drawMap()


    //move rectangle inside the canvas using arrow keys
    document.onkeydown = function(event) {
        var keyPr = event.keyCode; //Key code of key pressed

        if(keyPr === 68 && x<=1200){ 
            x = x+20; //right
        }
        else if(keyPr === 65 && x>0){
            x = x-20; //left
        }
        else if(keyPr === 87 && y>0) {
            y = y-20; //up
        }
        else if(keyPr === 83 && y<=600){
            y = y+20; //down
        }
            
        ctx.clearRect(0, 0, 1200, 600); //clearing anything drawn on canvas
      
        drawPlayer(x, y, wid, hei)
        drawMap()
    };
}



